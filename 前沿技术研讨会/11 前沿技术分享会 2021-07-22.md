

# 11 前沿技术分享会 2021-07-22

# 主题

## 伦敦升级专题

# 时间

时间：2021/07/22  14:00

## 地点

私享

## 会议参加者：

曾汨、Raphina、Winky、姚翔

  

## 活动流程：

### 主题讨论
2. 主题分享
分享一 伦敦升级各EIP介绍
分享二 GasToken兴亡史
分享三 难度炸弹考古
分享四 以太坊安全事件一览

## 摘要

### 伦敦升级各EIP介绍

  

### GasToken兴亡史

  

### 难度炸弹考古

原语里弄研究员Winky分享了关于难度炸弹的研究报告。

首先，Winky介绍了难度炸弹的设计目的和原理，接着详细介绍了为了推迟难度炸弹爆炸而进行的几次分叉：

2017年10月，拜占庭升级

2017年1月ACD9，Vitalik提出注意难度炸弹，ACD19上讨论了EIP-649，包括回退三百万个区块以及降低出块奖励到3ETH，中国矿工在提案下方有反对声。后来经过ACD22，23，25讨论，定于10月17日进行分叉（但这天难度炸弹已经爆炸了）

2019年2月，君士坦丁堡升级

2018年7月ACD42，Vitalik提出注意难度炸弹，ACD43及ACD44对难度炸弹相关的多个提案进行了讨论，其中EIP-1240和EIP-1227均提议移除难度炸弹，但EIP-1240遭到所有人反对，EIP-1227中移除难度炸弹的提议讨论被规避掉，ACD45的讨论也没有形成结果，此后没有再集中讨论这些问题。

2019年12月 伊斯坦布尔&2020年1月缪尔冰川 EIP-2384（有提示，但James算错了无人发现）

2019年8月ACD69，Danno提出注意难度炸弹，ACD72上，James表示难度炸弹会在2020年4-7月爆炸被质疑后改称为3月，ACD73确定伊斯坦布尔不包括难度炸弹，ACD75James表示还在算，后来发现测算错了…之后Thomas帮忙测算，后来发生了缪尔冰川紧急硬分叉。

2021年8月，伦敦升级，EIP-3554

2020年11月ACD101，Danno提出注意难度炸弹，ACD104确认在7月爆炸，核心开发者artem vorotnikov提出拆难度炸弹，再次遭到强烈反对，ACD112上Alexey提议拆除难度炸弹，但未获得讨论。

  

  

接着Winky聊了几个核心问题：一是能否预测炸弹爆炸时间？实际上通过计算其实不难。二是难度炸弹给以太坊治理带来的问题：108次核心开发者会议中提到46次，11次硬分叉中又6次有难度炸弹EIP，没有一次无争议通过，关于时间、经济模型、拆弹等的整治很多，其实给社区带来了很高的治理成本。三是为什么不拆除难度炸弹：EIP-649,EIP-1227,EIP-1240,acd104（直接被否定）,112其实都提到过，但经济上的、意识形态上的原因使之最后都没有实现。

  

现场还对Alexey, Artem的观点和实际上不拆除难度炸弹的可能原因进行了讨论。

  

  

### 以太坊安全事件一览

姚翔进行了主题为《以太坊安全事件一览》的分析，首先介绍了此次分享中“安全事件”的定义，选取范围为2021年发生或披露的安全事件，影响是全局的。

这次分享主要介绍了6起安全事件，其中2起发生了线上故障，时间戳精度问题和Geth同步冲突存在事件更是超过了4年。

姚翔首先介绍了OE客户端崩溃问题，它的导火索是Kucoin一笔填写了错误的参数交易，通过发版进行了修正，但是OE团队反思后决定放弃开发。然后介绍了时间戳精度问题，因为没有实际触发过，所以进行了导火索的假想，而会发生这个问题的根本原因是大多数客户端把对时间戳的数据范围定为了1到2^64，而Geth严格实现了黄皮书规定为了2^256，所以叔块如果填超过2^64的数，会导致GETH与其他客户端执行结果不一致，这个问题是白帽发现的，后来在大版本中进行了静默修复。Geth同步冲突也没实际发生过，但可能的导火索是攻击者精心构造三个智能合约，导致一部分状态永远不会被下载，所以可以在任意时间执行触发，解决方式也是静默修复。接着介绍了状态问题导致的DDOS，这个问题也尚未发生，是由研究人员发现的，根本原因在如果要求访问的数据不存在的时候，每一笔状态请求都会对整个状态树进行遍历，解决方法包括协议层面的调高操作码定价，但EIP-1884导致了很多合约不可用，以及EIP-2929和2930，工程层面通过增加快照提高客户端效率，而且这个漏洞被公开过，可能被有心人利用。