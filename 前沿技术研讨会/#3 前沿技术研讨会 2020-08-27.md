**

## 主题

公链的Layer 2和Layer 0

## 时间

时间：2020/08/27  14:00

## 地点

SNZ 

## 会议参加者：

  

### 活动流程

***分享***

1.  以太坊指数级别的扩展性 Yan Xin
    
2.  BSN的现状和规划 Zhu Tao
    
3.  DeFi安全签名 刘力心
    

***讨论***

这次讨论将围绕着“更好的公链”展开，我们主要讨论二层解决方案的原理、适用场景，其次也不能忽略支撑区块链的网络、硬件设备等关键支撑。

#### 分享一：以太坊指数级别的扩展性

近来以太坊的拥堵问题严重，二层解决方案受到了更多的关注。全球最大社区Reddit也在近期开启了其社区积分的可行性方案的征集，最终有22个团队提交了他们的[方案](https://www.reddit.com/r/ethereum/comments/hbjx25/the_great_reddit_scaling_bakeoff/)。

Yan Xin 首先讲述了以太坊拥堵的原因不仅仅是交易数量的增大，还包括交易类型也有变化，大量的合约交互也是拥堵的原因之一。传统的状态通道只能解决资产的转移问题，且资金利用率不高，无法维持节点长期的运营成本。新一代的扩容方案主要从链上数据可用性及交易正确性的角度来优化。

对于新一代的扩容方案，Plasma 和 Rollup 大类，可具体划分为以下四类：

| | SNARKs/STARKs | Fraud Proofs |
------- | ------ | ------
| Data on-chain(rollup) | ZK rollup | Optimistic rollup |
| Data off-chain(Plasma) | Validium | Plasma |

其中，Data on-chain 的方案就是 Rollup 方案，根据使用的证明不同，分为 ZK rollup 和 Optimistic rollup。其中 ZK rollup 使用零知识证明来证明处理的 Layer2 交易的有效性，Optimistic rollup 使用 Fraud Proof 来惩罚那些允许无效交易通过的验证节点。至于 rollup 是通过使用什么方法来保证数据的可用性，Yan Xin 分享，通过压缩Layer2上的交易数据，并把压缩后的交易数据上以太坊主网链来保证数据的可用性，比如对地址长度的压缩，以太币的精度的压缩等。

Data off-chain 的方案主要是 Plasma 方案，包括使用零知识来保证安全的 Validium 和使用 Fraud Proof 保证安全的其他 Plasma。这类方案，比如 Validium，通过对链下（链下特指以太坊主网下，包括侧链等Layer2）数据的有效性证明，来保证链下数据的真实性和可用性。

对于这四类扩容方案，各有各的特色，下表是它们在安全性和易用性上的对比。

  

|   | | Plasma | zkRollup | Optimistic rollup | Validium |
|:---------- | :------- | :---- |:---- | :---- | :---- |
| 安全性|数据可用性 | N | Y | Y | Y |
| 安全性| 在线假设 | Y | N | Y | N |
| 易用性 | 退出至Layer1时间 | 1 week | 1zkproof（1min）| 1week | 1zkproof(1min) |
| 易用性| Layer2内交易确认时间 | 1confirmation | 1zkproof | 1confirmation |1zkproof |
| 易用性| 智能合约兼容度 | LOW |LOW  | HIGH  | LOW |
| 易用性| 简单交易TPS理论值  | \>10k  | <2.5k | <2.5k  |\>20k |

  

除了以上的新一代扩容方案，还有一些团队在深耕基于 State Channel 的扩容方案，包括Celer Network、Raiden Network 、Connext/SpankChain 和 Liquidity Network。因此，按照这三大类划分，每一大类里面目前有一些团队在实现对于的解决方案：

  |  State Channel | State Channel | Plasma | Plasma | Rollup | Rollup |
  |:---------- | :------- | :---- |:---- | :---- | :---- |
  | | | Fraud Proofs | ZK Proofs | ZK Rollup | Optimistic rollup |
  | Celer Network | Liquidity Network | OMG Network | StarkWare(Validium) | zkSync | Optimism |
| Raiden Network | Connext/SpankChain | Matic Network | | Loopring | Fuel |
| Abridged and Kchannels | | | | | |

  
接着 Yan Xin 详细分享了 zkSync 和 Optimistic Rollup 这两个方案。

其中 zkSync 基于 ZK Rollup 技术，拥有高 TPS，低手续费，亚秒级确认等优点，并且还有一个基于零知识证明的智能合约框架，有分片系统，性能上能保证。目前属于 beta 版本，还没正式上线。同样，它的不足是需要监督节点，而监督节点的激励则需要发币，导致复杂化。

而 Optimism 在复用已有的以太坊工具链上做得很棒。这个团队之前在做 Plasma 解决方案，后转型 Optimistic rollup，他们实现了 Layer2 的 OVM，即和 EVM 兼容的 Layer2 智能合约环境，而且这个团队做得比较快，因此如果 DeFi 团队像移植到 Layer2 上，则推荐他们。

接下来，Yan Xin 分享了 [Reddit 社区积分扩容方案](https://www.reddit.com/r/ethereum/comments/hbjx25/the_great_reddit_scaling_bakeoff/)，它有着以下要求：

-   100,000 point
    
-   user不需要了解区块链，不需要 proof
    
-   转账最多几秒钟或者几分钟
    
-   没有 gas（Reddit 来出，因此不能太高）
    
-   要支持上亿用户
    

 然后包括以上分享的方案等，共有 22 个方案提交了他们的申请，具体参考：[https://www.reddit.com/r/ethereum/comments/hbjx25/the\_great\_reddit\_scaling\_bakeoff/](https://www.reddit.com/r/ethereum/comments/hbjx25/the_great_reddit_scaling_bakeoff/)

[https://www.8btc.com/media/637308](https://www.8btc.com/media/637308)

从 Reddit 社区积分扩容方案引申出了以太坊线性扩容与指数扩容，其实社区更愿意接受线性扩容，不需要牺牲太多的去中心化。线性扩容指的是，扩容的效率是常数倍数的，因此仍然存在瓶颈。而指数扩容则在理论上没有瓶颈。

（挑战：其实线性扩容还是牺牲了部分去中心化，因为对矿机要求更高，小矿工慢慢退出。）

Rollup 是一种线性扩容，TPS 有天花板，3000，但是还是无法支持 Reddit。

接着分享了off-chain data availability (OCDA)，因为 Rollup 是有天花板的，不管怎么压缩，以太坊主网的承载量就那些。因此一种观点认为：一个可信的链下数据存储就很有必要了，其中 lazyledger（cosmos 生态）专门存数据交易；starkware(就是那个搞 Validium 的)专门存储交易数据。

  

接着分享扩容横向比较

Plasma —> General Sidechain —> Layer 1 with bridge

Secure usability Functionality

OMG/Matic xDai(有metamask） Near(公链就给以太坊做）

  

最后，在Layer2生态越来越丰富的时候，Layer2之间的跨链也是很有必要的，包括 Spacefold [https://www.spacefold.io/](https://www.spacefold.io/) 可实现 Matic 跨 xDAI

#### 讨论：Dao 迁移到 xDai 的考虑（邀请DAOSquare的Typto和大硕）

Gas费高，尤其是 DAO 中发起提案，因此迁移到 xDai 上可能是一个方案。

通过尝试，在 xDai 上创建一个 DAO，只需几毛钱，而现阶段在以太坊上创建一个 DAO，则可能花费几千元。

新的问题：

-   资金转移，转移Dai还不错，其他的erc20不行，比较复杂，需要专门配置
    
-   把智能合约放在xDai（一种新币），专门把erc20转xDai一键转化
    
-   xDai 上没有像主网上的那么多的DeFi场景，但是趋势是更多的资产往那边迁移，所以还是很看好xDai。
    

#### 大硕：

-   xDAI，节点一年收益太低了（不能可持续发展），解决这个问题还是需要成为一个多链的状态。他们自己也想做多条链，同质化，侧链池，但是此时，又需要解决侧链的沟通问题。
    
-   数据层，以太坊做智能合约”续费“的模式。永久存储项目，能不能实现，公共的存储层，二次技术的扩容，这样二层的进展挺好的。
    

REN 项目比较中立，独立把资产做一个封装。

#### 分享二：“BSN的现状和规划”—— Zhu Tao

区块链服务网络BSN（“服务网络”或者“BSN”）是为开发者提供了一站式的区块链开发、部署和运行环境服务，整合了各大云服务商、框架商以及多个门户方的资源。

所以今天邀请到BSN研究院Zhu Tao向我们分享，区块链服务网络BSN最初设想始源，现状以及他的未来规划。

BSN（区块链服务网络）2019年10月15日内测发布，2020年4月25日商用启动。主要由国家信息中心，中国银联，中国移动以及红枣科技四家公司分工完成。国家信息中心牵头进行顶层规划，中国移动负责网络资源规划，中国银联和红枣科技进行技术实现，银联也会负责进行网络支付的业务。

**BSN的特点主要有以下特点：**

1、国家级的基础设施网络（只是指中国国内，BSN国际版只由红枣科技单独运营）

2、网络开发性：通过BaaS 和增值服务为区块链个人开发者和应用方提供低成本的区块链解决方案

3、技术先进：适配国际上主流的区块链技术框架

4、费用低：BSN的价格由TPS（计算力）、存储和流量组成，比如租用三个节点，10TPS，10GB的存储，一年的费用大概在2000人民币。

同时Zhu老师说，假如需要框架接入的话，签署协议即可接入。

BSN相关的发展是由BSN联盟成员单位进行支持，主要包括云服务提供商，金融，开发者，媒体等组成。主要的组成部分有：

云服务：由中国移动进行主要管理，现在共有86个城市节点，其中中国移动有70多家。金融委员会：主要有中国银联运营组织，以及民生银行和银联商务

开发者：主要由红枣科技进行管理，可以通过合格开发者管理进行申请加入，同时也有其他相应的框架合作厂商，比如微众银行，链火等。

媒体：人民网，虎嗅，其中链得得和巴比特都基于BSN做了子门户

Zhu老师也对现在BSN的发展情况以及最近的发展规划也和大家做了分享：

现在城市节点86个，其中7个海外节点，区块链底层框架数4个，商用应用超过60个。到今年10月31日进行升级迭代，完成CITA联盟链适配，并推出公测；推出BSN许可链测试网，用户可以免费测试智能合约；基于BSN的IPFS专网开始公测；推出BSN跨链通信枢纽（ICH）演示版DEMO。

 同时Zhu老师也对于BSN的系统架构以及相关关键角色为大家进行了讲解。

 BSN的业务系统的业务流程主要是个人开发者和企业机构、通过BSN门户或者子门户进行需求提交，对接到BSN运维管理平台，通过该平台部署到相应的城市节点网络中，调用相应的框架，形成区块链应用的部署。

BSN发布了基础白皮书和技术白皮书，在本次分享中Zhu老师针对基础白皮书中的四个方面给大家进行了讲解：

1、城市节点

首先Zhu老师强调，特别强调，公共城市节点并不是一个区块链节点，公共城市节点实际上是一个资源池，用于将其所部署的云服务和数据中心内的一部分计算力、存储和流量资源接入到服务网络内。在这个资源池内建有完整的区块链运行环境，包括多个区块链底层框架、记账节点、CA 管理、权限链、城市节点网关和城市节点管理系统等。该底层架构是由宏奥科技完成和管理的。开发者可以通过任何一个 BSN 门户部署自己的应用链，具体过程为：选择区块链底层技术框架编写并上传智能合约，选择部署应用链的一个或多个公共城市节点，选择每个城市节点内部署的记账节点数，点击发布。应用链的智能合约通过安全检查后，将由服务网路的运维中心自动部署到开发者已选定的公共城市节点内的记账节点并开始运行。开发者的链下业务系统通过连接任何一个部署了应用链的城市节点的网关，实现与相关应用链的数据交互。 

2、技术框架适配

服务网络的核心理念之一是支持尽量多的区块链底层框架。根据《区块链服务网络底层框架适配标准》，由国家信息中心进行根CA 管理、由红枣科技的 SDK配置和智能合约管理等方面实现。使得开发者可以使用一个私钥发布和管理多个底层异构的应用链并实现应用链之间的互联互通。在这一过程中，每个底层框架将保留具有各自特点的智能合约和共识机制。

 3、赋能平台：

主要由红枣科技将区块链应用所需的运行环境、云资源、网络通信和调取接口进行封装，形成一套区块链应用开发，部署和管理的赋能平台。基于该赋能平台，各个机构可以建设自己的门户，每个门户有非常高的自主权和独立性。除了购买服务网络资源和发布应用外，其他功能均由门户自身提供，例如：用户注册和管理、计费和收费、开发者社区等。每个门户自主收费，扣除自身的收入后，剩余部分按周结算并支付给服务网络授权的结算公司，再由结算公司分配给相应的云服务商、底层框架商和运维管理机构。服务每个门户独立管理自己的用户，用户信息不与服务网络分享。门户内发布的应用在其他门户内无法看到。用户界面

和非服务网络的其他功能完全由门户管理方自行设计、建设和运维。

 4、应用服务的发布流程

应用服务是指在区块链服务网络中已经发布并运行的区块链应用，用户可以通过服务网络门户发布自己的区块链应用服务，相应的流程是提前准备应用的智能合约代码，上传链码包，再定义服务功能及角色，选择发布的城市节点、付费周期以及是否使用云服务等信息；

 最后Zhu老师也总结了在BSN生态中的各个生态参与方有，开发者，云服务商，底层框架商，门户上，运维方。各方都可以实现基于BSN的商业收费模式。现在各地方政府基于BSN的基础都在构建自己的主干网，但是现在BSN在国内的发展路线还不是很清晰。

 **姚翔总结：**

之前我们对于BSN 是有信息的不对称的问题。

 **问题讨论：** 

1、联盟链的数据如何进行传输

从国内而言，虽然有跨链的技术规划，但是从公链向联盟链的数据传输应该是不会进行的。

A: BSN对于海外以及有过发币历史的项目比较谨慎

 2、BSN的发展难度是什么？

A: 现在BSN商业模式还在探索，知名的企业一般是自建基础设施，不太可能应用BSN

3、从区块链的基本应用特点来看，上链的信息是没有流转的，BSN未来会有基于Token Base的信息上链吗？

A: 现在是没有的，未来的可能性也不大

4、在BSN的信息上链的信息是永久存储的吗？

A：缴费的话会被存储，存储不够会提醒进行扩容

5、未来DCEP会跑到联盟链上吗？

A: 从目前DCEP的测试情况看，还没有用到区块链。

  

#### 分享三：“Cobo Vault 与DeFi安全签名的结合使用设计”—— 刘力心

力心今天带着他的Cobo钱包的设计思考以及问题和大家做了分享。

现在全球比较知名的硬件钱包有 Ledger，力心在设计Cobo钱包之初探访了一些使用 Ledger的用户体验，大家给出统一的答案是使用Ledger在和自己电脑进行交互的过程是最担心的，因为Ledger保存着私钥，当和电脑设备进行链接后就会有收到攻击的可能性。

所以Cobo的设计是脱网的设计，该设备有摄像头和四寸屏幕，和热钱包进行交互的方式是通过扫码的方式。具体方式：在热端上创建一笔待签名交易，这笔交易数据体现为二维码；Cobo通过相机扫描热端二维码获取数据；然后确认交易并签名生成签名数据，同样体现为二维码。

4月份发布了第二代产品，2020年团队的开发力量都集中在比特币上，所以在比特币多签方面取得了非常好的成绩，力心分享了在比特币圈子内的一位KOL将Cobo钱包进行了说明。具体链接如下，大家可以参考：

[https://btcguide.github.io/](https://btcguide.github.io/)

今天力心也主要希望和大家一起探讨二维码的扫码体验和defi的结合时如何的？力心和大家展示了通过Parity Signer（Parity制作的一个手机离线签名器，二维码交互）与波卡钱包Polkadot.js的交互，通过Parity Signer创建地址，这个地址是可以通过二维码的方式进行呈现（脱网状态），之后通过Polkadot.js点击Add via Qr，点击后就开启了电脑的摄像头，之后扫描刚才生成的二维码，这样这个地址就转接完成。通过以上逻辑力心演示了转账的进行，未来Cobo金库和波卡在二维码方面的交互也是这个逻辑。将来staking，governance等本质上都是通过签名的方式实现，所以未来希望通过Cobo金库的签名逻辑和其他钱包和产品进行交互的方式。

 但是力心想要和大家探讨的问题主要有以下两个方面：

首先，硬件钱包的安全性问题

其次，二维码的用户体验是不是可以将 Ledger用户等转化成Cobo用户

 hongbo也对以上问题分享了他的体会，国内和国外的用户对于硬件钱包的安全意识是不同的，国内大家的安全意识还不强，国外的用户很重视；Ledger的用户体验是大家的诟病，但是从安全性问题上还不构成他的缺陷。所以hongbo对于Cobo钱包在国内的销售可能接受度还是有问题的，从成本上考虑。

 所以力心也分享说，Cobo钱包的主要销售还是在美国市场，中国的销售额和澳大利亚差不多。

链闻的潘老师提出，比特币的签名比较简单，以太坊会的智能合约签名会比较复杂，需要生成一些二维码重叠，这样会不会导致难度升级？ 

力心：其实是比特币会比较复杂的，因为比特币是UTXO，这样待签信息就比较大，同时比特币还有自己的待签信息的标准，叫做PSBT，会导致信息巨大。现在的实验看来，Polkadot上至今为止还没有出现多于二张二维码，同时Cobo还设计了动态二维码的设计。大家可以参考如下视频：

[https://twitter.com/StepanSnigirev/status/1279727784777089024](https://twitter.com/StepanSnigirev/status/1279727784777089024) 

另外一个观点很有意思：DeFi的安全瓶颈不在于钱包，而是合约本身。所以TA不会过度关注使用DeFi时用软件钱包还是硬件钱包，只要是大家公认的钱包即可（比如Metamask或者通过Wallet Connect连接别的钱包）

但是总体普通人对于通过签名的方式保证安全性的问题并不是在意或者并不懂二维码扫描后的解析等技术问题，大家关注的再投资过程中的风险，所以整体从用户端没有特别的感觉。

当然这也只是在场朋友的一些体验，希望Cobo钱包的二维码扫描的解决方案未来可以有更多结核性的应用。

  

**
